from flask import Blueprint, send_file, render_template
import os


result_blueprint = Blueprint('result', __name__)

@result_blueprint.route("/download/csv/<string:version_date>", methods=["GET", "POST"])
def download_csv(version_date):
	"""
	Download simulation result CSV files
	<string:version_date> is to download the last zip generate after new simulation
	"""		

	path_files = os.path.join(os.getcwd(), 'files')
	path_file = os.path.join(path_files, 'result.zip')	

	# https://www.youtube.com/watch?v=sy1MNWt7om4
	return send_file(path_file, as_attachment=True)


@result_blueprint.route("/data-visualization/<string:version_date>", methods=["GET"])
def data_visualization(version_date):
	"""
	Visualizate the HTML generated by R markdown
	<string:version_date> is to visualize the last restul.html generate after new simulation
	"""

	return render_template('/results/results.html')
